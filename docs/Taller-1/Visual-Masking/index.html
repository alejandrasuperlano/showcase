<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Visual Masking  # Workshop Implementar una aplicaci贸n web de procesamiento de imagenes que soporte varios kernels y adem谩s:
Visualizaci贸n de histograma de la imagen Diferentes herramientes de luminosidad Marco te贸rico # Kernel # Un kernel o mascara es una matriz usada para aplicar algun tipo de efecto como difuminado, detecci贸n de bordes , sobre una imagen. Eso se logra realizando una convoluci贸n entre el kernel y la imagen. 驴Qu茅 es una convoluci贸n?"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Visual Masking  # Workshop Implementar una aplicaci贸n web de procesamiento de imagenes que soporte varios kernels y adem谩s:
Visualizaci贸n de histograma de la imagen Diferentes herramientes de luminosidad Marco te贸rico # Kernel # Un kernel o mascara es una matriz usada para aplicar algun tipo de efecto como difuminado, detecci贸n de bordes , sobre una imagen. Eso se logra realizando una convoluci贸n entre el kernel y la imagen. 驴Qu茅 es una convoluci贸n?"><meta property="og:type" content="article"><meta property="og:url" content="https://mbolanoss.github.io/showcase/docs/Taller-1/Visual-Masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-11-09T00:34:58-05:00"><title>Visual Masking | Visual computing</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.e106bffc281cb4f83165d43a7d67e62a5da19d71d1a58cd140040e1e99907b55.js integrity="sha256-4Qa//CgctPgxZdQ6fWfmKl2hnXHRpYzRQAQOHpmQe1U=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual computing</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Taller 1</span><ul><li><a href=/showcase/docs/Taller-1/Visual-Illusions/>Visual Illusions</a></li><li><a href=/showcase/docs/Taller-1/Visual-Masking/ class=active>Visual Masking</a></li></ul></li><li class=book-section-flat><span>Taller 2</span><ul><li><a href=/showcase/docs/Taller-2/3D-App/>3 D App</a></li></ul></li><li class=book-section-flat><span>Taller 3</span><ul><li><a href=/showcase/docs/Taller-3/Color-Blending/>Color Blending</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Visual Masking</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#visual-masking->Visual Masking </a><ul><li><a href=#marco-te贸rico>Marco te贸rico</a><ul><li><a href=#kernel>Kernel</a></li><li><a href=#histograma>Histograma</a></li><li><a href=#herramientas-de-luminosidad>Herramientas de luminosidad</a></li></ul></li><li><a href=#soluci贸n-y-resultados>Soluci贸n y resultados</a><ul><li><a href=#kernel-1>Kernel</a></li><li><a href=#histograma-1>Histograma</a></li><li><a href=#herramientas-de-luminosidad-1>Herramientas de luminosidad</a></li></ul></li><li><a href=#conclusiones>Conclusiones</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=visual-masking->Visual Masking 
<a class=anchor href=#visual-masking->#</a></h1><blockquote class="book-hint danger"><p><b>Workshop</b></p><p>Implementar una aplicaci贸n web de procesamiento de imagenes que soporte varios kernels y adem谩s:</p><ul><li>Visualizaci贸n de histograma de la imagen</li><li>Diferentes herramientes de luminosidad</li></ul></blockquote><h2 id=marco-te贸rico>Marco te贸rico
<a class=anchor href=#marco-te%c3%b3rico>#</a></h2><h3 id=kernel>Kernel
<a class=anchor href=#kernel>#</a></h3><p>Un kernel o mascara es una matriz usada para aplicar algun tipo de efecto como difuminado, detecci贸n de bordes
, sobre una imagen. Eso se logra realizando una convoluci贸n entre el kernel y la imagen.<blockquote class="book-hint info"><strong>驴Qu茅 es una convoluci贸n?</strong><br>En procesamiento de imagenes, una convoluci贸n consiste en multiplicar cada p铆xel de la imagen por la entrada correspondiente del kernel, luego al sumar todos los resultados, se obtiene el valor del nuevo p铆xel.</blockquote></p><p>A modo de ejemplo, se escogieron los siguientes kernels para mostrar su aplicaci贸n:</p><details><summary>Sharpening</summary><div class=markdown-inner><link rel=stylesheet href=/showcase/katex/katex.min.css><script defer src=/showcase/katex/katex.min.js></script>
<script defer src=/showcase/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\[\begin{bmatrix}
0 & -1 & 0\\
-1 & 5 & -1\\
0 & -1 & 0\\
\end{bmatrix}\]</span></div></details><details><summary>Emboss</summary><div class=markdown-inner><span>\[\begin{bmatrix}
-2 & -1 & 0\\
-1 & 1 & 1\\
0 & 1 & 2\\
\end{bmatrix}\]</span></div></details><details><summary>Blur</summary><div class=markdown-inner><span>\[\begin{bmatrix}
0.0625 & 0.125 & 0.0625\\
0.125 & 0.25 & 0.125\\
0.0625 & 0.125 & 0.0625\\
\end{bmatrix}\]</span></div></details><h3 id=histograma>Histograma
<a class=anchor href=#histograma>#</a></h3><p>Un histograma de una imagen consiste en la representaci贸n gr谩fica de la distribuci贸n tonal de la imagen, trazando el n煤mero de p铆xeles de cada canal.<br>En el eje horizontal representa las variaciones tonales, mientras que el vertical, representa la cantidad de p铆xeles en un tono particular.</p><blockquote class="book-hint info"><p><strong>驴C贸mo interpretar un histograma?</strong></p><p>El lado izquierdo del eje horizontal representa las 谩reas oscuras y el derecho representa las 谩reas iluminadas.<br>Por ejemplo, para una imagen oscura, esta tendr谩 la mayor铆a de puntos dibujados en el lado izquiero del histograma.</p></blockquote><h3 id=herramientas-de-luminosidad>Herramientas de luminosidad
<a class=anchor href=#herramientas-de-luminosidad>#</a></h3><p>La luminosidad es la percepci贸n visual de la luminancia de un objeto. En colorimetr铆a, es una predicci贸n de que tan iluminado aparecer谩 un color para un determinado observador.<blockquote class="book-hint info"><strong>驴Qu茅 es la luminancia?</strong>
Es la m茅dida de intensidad lum铆nica por unidad de 谩rea de la luz viajando en una determinada direcci贸n. Es decir, describe la cantidad de luz que pasa a trav茅s, es emitida o reflejada de un 谩rea particular.<br>Existen varias formas de calcular la luminosidad de un color. A modo de ejemplo, se mostrar谩n las siguientes 4:</blockquote></p><details><summary>Media aritm茅tica</summary><div class=markdown-inner><span>\[I=\frac{R+G+B}{3}\]</span></div></details><details><summary>HSV</summary><div class=markdown-inner><span>\[V=max(R,G,B)\]</span></div></details><details><summary>HSL</summary><div class=markdown-inner><span>\[L=\frac{max(R,G,B)+min(R,G,B)}{2}\]</span></div></details><details><summary>Luma</summary><div class=markdown-inner><span>\[Y=0.2126\cdot R+ 0.7152\cdot G+0.0722\cdot B\]</span></div></details><h2 id=soluci贸n-y-resultados>Soluci贸n y resultados
<a class=anchor href=#soluci%c3%b3n-y-resultados>#</a></h2><h3 id=kernel-1>Kernel
<a class=anchor href=#kernel-1>#</a></h3><p><script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
<script src=/showcase/sketches/imageKernel.js></script><div id=imageKernel></div>A continuaci贸n se muestra la funci贸n principal, la cual es la encargada de calcula el nuevo valor de cada p铆xel:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>applyKernelToPixel</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>kernel</span>, <span style=color:#a6e22e>kernelSize</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newR</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newG</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Go through each kernel entry
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>r</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>kernelSize</span>; <span style=color:#a6e22e>r</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>c</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>kernelSize</span>; <span style=color:#a6e22e>c</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Compute the offset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rowOffset</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>r</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colOffset</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imageRow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>rowOffset</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imageCol</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>colOffset</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentPixel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>originalImg</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>imageRow</span>, <span style=color:#a6e22e>imageCol</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Compute new value for each channel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>newR</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>currentPixel</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>r</span>][<span style=color:#a6e22e>c</span>];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>newG</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>currentPixel</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>r</span>][<span style=color:#a6e22e>c</span>];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>newB</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>currentPixel</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>r</span>][<span style=color:#a6e22e>c</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// In case the new value is greater than 255
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>newR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>newR</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>newG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>newG</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>newB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>newB</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>newR</span>, <span style=color:#a6e22e>newG</span>, <span style=color:#a6e22e>newB</span>);
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h3 id=histograma-1>Histograma
<a class=anchor href=#histograma-1>#</a></h3><script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
<script src=/showcase/sketches/imageHistogram.js></script><div id=imageHistogram></div><p>A continuaci贸n se muestra la funci贸n principal, la cual es la encargada de contar la cantidad de p铆xeles en cada valor de un determinado canal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>countPixels</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Go through each pixel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pixel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Add 1 to the current tonal value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>currentColor</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;red&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>?</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>pixel</span>)
</span></span><span style=display:flex><span>          <span style=color:#f92672>:</span> <span style=color:#a6e22e>currentColor</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;green&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>?</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>pixel</span>)
</span></span><span style=display:flex><span>          <span style=color:#f92672>:</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>pixel</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>value</span>] <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h3 id=herramientas-de-luminosidad-1>Herramientas de luminosidad
<a class=anchor href=#herramientas-de-luminosidad-1>#</a></h3><script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
<script src=/showcase/sketches/lightnessTools.js></script><div id=lightnessTools></div><p>A continuaci贸n, se muestra la implementaci贸n de las 4 maneras de calcular la luminosidad expuestas anteriormente, junto con la funci贸n encargada de aplicar ese c谩lculo a cada pixel de la imagen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lightnessModes</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mean</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>color</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>)) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hsv</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>color</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Math.<span style=color:#a6e22e>max</span>((<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>)));
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hsl</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>color</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>max</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>max</span>((<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>)));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>min</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>min</span>((<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>), <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>)));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>max</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>min</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>luma</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>color</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>0.2126</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.7152</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0722</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>applyLightness</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>mode</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Extract the current function
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lightnessModes</span>[<span style=color:#a6e22e>mode</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Go through each pixel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>originalImg</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>originalImg</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newPixel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lightness</span>(<span style=color:#a6e22e>originalImg</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentImg</span>.<span style=color:#a6e22e>set</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>newPixel</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><h2 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h2><ul><li>La aplicaci贸n de una convoluci贸n usando un kernel a una imagen se ver铆a en extremo beneficiada por la paralelizaci贸n de dicha aplicaci贸n</li><li>Se deben considerar todas las formas de calcular la luminosidad de una imagen a la hora de pasar la imagen a escala de grises</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/0b949358c085311f3be98bd3dac4215e1bb3230d title='Last modified by Santiago Acosta Meza | November 9, 2022' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 9, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#visual-masking->Visual Masking </a><ul><li><a href=#marco-te贸rico>Marco te贸rico</a><ul><li><a href=#kernel>Kernel</a></li><li><a href=#histograma>Histograma</a></li><li><a href=#herramientas-de-luminosidad>Herramientas de luminosidad</a></li></ul></li><li><a href=#soluci贸n-y-resultados>Soluci贸n y resultados</a><ul><li><a href=#kernel-1>Kernel</a></li><li><a href=#histograma-1>Histograma</a></li><li><a href=#herramientas-de-luminosidad-1>Herramientas de luminosidad</a></li></ul></li><li><a href=#conclusiones>Conclusiones</a></li></ul></li></ul></nav></div></aside></main></body></html>